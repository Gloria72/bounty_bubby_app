# 搭子任务赏金平台 - 技术架构与开发规划

## 一、产品核心理解

基于PRD分析,这是一个**任务驱动的搭子匹配平台**,核心机制:
- **赏金托管(Escrow)**: 资金托管保障履约
- **智能匹配**: 多维度(兴趣/技能/时间/地点/信誉)匹配
- **信任体系**: 分级实名认证 + 信誉评分 + 互评机制
- **北极星指标**: 成功完成的任务数

设计风格: **赏金猎人风格 - 简约大气**

## 二、技术栈规划

### 2.1 Web应用
- **框架**: React + Next.js (SSR/SSG支持,SEO友好)
- **UI库**: Tailwind CSS + shadcn/ui (现代化组件)
- **状态管理**: Zustand (轻量级)
- **地图**: Mapbox GL JS / Google Maps API
- **实时通信**: Socket.io (站内IM)
- **支付**: Stripe Connect集成(托管)
- **部署**: Vercel / 自托管

### 2.2 移动端应用
- **框架**: React Native + Expo
- **导航**: React Navigation
- **UI库**: React Native Paper / NativeBase
- **地图**: react-native-maps
- **状态管理**: Zustand
- **推送**: Expo Notifications
- **支付**: Stripe SDK

### 2.3 后端(Mock/演示用)
- **框架**: Node.js + Express / FastAPI
- **数据库**: PostgreSQL (用户/任务/托管/评价)
- **缓存**: Redis (匹配算法/实时数据)
- **文件存储**: S3 / Cloudinary

## 三、核心功能模块

### 3.1 用户系统
- [x] 注册/登录(手机号/邮箱)
- [x] 分级实名认证(L0-L3)
- [x] 用户画像(兴趣/技能/可用时间/位置)
- [x] 信誉体系(完成率/准时率/评价分/徽章)

### 3.2 任务系统
- [x] 任务发布(标题/描述/赏金/时间窗/地点/标签)
- [x] 任务类型(1v1/小组/持续任务)
- [x] 任务状态流转(发布→匹配→执行→验收→完成)
- [x] 任务分类(学习/健身/拼车/旅行/生活服务)

### 3.3 匹配与发现
- [x] 地图模式(地理热区浏览)
- [x] 主题Feed(分类浏览)
- [x] 赏金排行榜
- [x] 智能推荐(多维度匹配算法)
- [x] 高级筛选(距离/时间/技能/信誉)

### 3.4 赏金托管(Escrow)
- [x] 充值→托管→验收→放款流程
- [x] 平台佣金抽成
- [x] 违约惩罚机制
- [x] 申诉仲裁系统
- [x] 退款处理

### 3.5 沟通与协作
- [x] 站内IM(实时聊天)
- [x] 确认单生成(时间/地点/分工/安全须知)
- [x] 图片/位置共享
- [x] 系统通知(状态变更/异常预警)

### 3.6 验收与评价
- [x] 任务凭证(打卡/照片/GPS到场)
- [x] 双方确认验收
- [x] 互评打分与标签
- [x] 信誉分更新

### 3.7 安全与风控
- [x] 紧急联系人
- [x] 行程分享
- [x] 一键报警/客服
- [x] 内容审核(AI+人工)
- [x] 风险提示

## 四、页面结构规划

### Web应用页面
1. **首页** - 地图/主题切换,任务热区展示
2. **任务广场** - 任务列表,筛选排序
3. **任务详情** - 任务信息,接单/沟通
4. **发布任务** - 3步发布流程
5. **个人中心** - 信誉/徽章/订单/设置
6. **消息中心** - 站内IM,系统通知
7. **我的任务** - 发布的/接单的任务
8. **钱包** - 充值/提现/交易记录
9. **认证中心** - 分级实名认证
10. **帮助中心** - 规则/安全须知/FAQ

### 移动端应用页面
1. **首页(Tab)** - 地图/Feed切换
2. **发现(Tab)** - 主题分类,赏金榜
3. **消息(Tab)** - IM聊天列表
4. **我的(Tab)** - 个人中心
5. **任务详情** - 同Web
6. **发布任务** - 同Web
7. **钱包** - 同Web
8. **设置** - 账户/安全/通知

## 五、设计风格指南

### 赏金猎人风格元素
- **配色方案**:
  - 主色: 深蓝/深灰(#1a1a2e, #16213e) - 专业稳重
  - 强调色: 金色/琥珀色(#f39c12, #e67e22) - 赏金感
  - 辅助色: 冷蓝/青色(#3498db, #1abc9c) - 科技感
  - 背景: 深色主题 + 浅色模式切换

- **视觉元素**:
  - 金币/赏金图标
  - 徽章/勋章系统
  - 进度条/完成度可视化
  - 地图热区(赏金密度)
  - 信誉星级/等级标识

- **排版**:
  - 字体: 无衬线现代字体(Inter, SF Pro)
  - 层级清晰,留白充足
  - 卡片式布局
  - 数据可视化(图表/仪表盘)

## 六、开发优先级

### MVP阶段(优先开发)
1. 用户注册/登录/基础认证
2. 任务发布/浏览/接单
3. 地图模式 + 主题Feed
4. 站内IM(简化版)
5. 模拟托管支付流程
6. 验收与互评
7. 基础信誉体系

### V1.0阶段
1. Stripe Connect集成
2. 分级实名认证
3. 智能匹配算法
4. 仲裁系统
5. 风控机制
6. 推送通知

### V1.5阶段
1. 小组任务
2. 连续任务
3. GPS到场验证
4. 高级推荐
5. 会员体系

## 七、开发计划

### Phase 1: Web应用开发
- 初始化Next.js项目
- 设计系统搭建(Tailwind + shadcn/ui)
- 核心页面开发(首页/任务广场/详情/发布)
- 地图集成
- 用户系统
- Mock数据与API

### Phase 2: React Native应用开发
- 初始化Expo项目
- 共享组件库
- 核心页面开发
- 原生功能集成(地图/推送/相机)
- 与Web共享状态逻辑

### Phase 3: 集成与优化
- 响应式优化
- 性能优化
- 测试与调试
- 部署配置

## 八、技术亮点

1. **跨平台代码复用**: Web和RN共享业务逻辑
2. **实时匹配算法**: 多维度评分系统
3. **地图可视化**: 任务热区,距离筛选
4. **托管流程**: 完整的Escrow状态机
5. **信誉体系**: 动态评分与徽章系统
6. **安全机制**: 多层验证与风控

---

**下一步**: 开始Web应用开发,搭建项目框架

