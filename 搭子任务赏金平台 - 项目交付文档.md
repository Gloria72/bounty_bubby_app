# 搭子任务赏金平台 - 项目交付文档

## 项目概述

基于PRD文档开发的**搭子任务赏金平台**,采用赏金猎人风格的简约大气设计,包含Web应用和React Native移动端应用。

### 核心机制
- **赏金托管(Escrow)**: 资金托管保障履约
- **智能匹配**: 多维度匹配算法(兴趣/技能/时间/地点/信誉)
- **信任体系**: 分级实名认证 + 信誉评分 + 互评机制
- **北极星指标**: 成功完成的任务数

---

## 一、Web应用 (已完成)

### 技术栈
- **前端**: React 19 + Next.js + Tailwind CSS 4
- **后端**: Express + tRPC 11
- **数据库**: MySQL/TiDB (Drizzle ORM)
- **认证**: Manus OAuth
- **部署**: 已部署到开发环境

### 数据库Schema (8个表)

#### 1. users - 用户表
- 基础认证信息(openId, name, email)
- 角色管理(admin/user)
- 登录时间追踪

#### 2. userProfiles - 用户画像
- 个人信息(头像/简介/位置/坐标)
- 验证等级(L0-L3)
- 信誉系统(评分/完成率/准时率/徽章)
- 技能/兴趣/可用时间

#### 3. tasks - 任务表
- 任务基本信息(标题/描述/分类/类型)
- 赏金金额
- 位置信息(线上/线下/坐标/半径)
- 时间窗口(开始/结束时间)
- 状态流转(open/matched/inProgress/completed/cancelled/disputed)
- 验收方式(photo/checkin/mutual/gps)

#### 4. taskApplications - 任务申请
- 申请状态(pending/accepted/rejected/cancelled)
- 匹配分数
- 申请消息

#### 5. escrows - 赏金托管
- 托管金额/平台费用
- 状态(pending/held/released/refunded/disputed)
- 支付方式/交易ID
- 释放时间

#### 6. reviews - 评价系统
- 双向评价(评价者/被评价者)
- 评分/评论/标签
- 准时性标记

#### 7. messages - 消息系统
- 站内IM
- 消息类型(text/image/location/confirmation)
- 已读状态

#### 8. disputes - 争议仲裁
- 争议原因/证据
- 状态(open/reviewing/resolved/closed)
- 解决方案/仲裁人

### 核心功能

#### 首页
- Hero区(价值主张/CTA按钮)
- 统计卡片(活跃任务/赏金总额/完成率)
- 热门分类(6个主要分类)
- 最新任务展示(卡片式布局)
- CTA引导区

#### 任务广场
- 搜索功能(标题/描述)
- 分类筛选(7个分类)
- 任务卡片(分类/位置/赏金/类型)
- 空状态处理

#### 发布任务
- 3步发布流程
- 必填字段验证
- 线上/线下选择
- 时间范围设置
- 标签系统
- 发布提示

#### API路由 (tRPC)
- `tasks.list` - 获取任务列表
- `tasks.getById` - 获取任务详情
- `tasks.create` - 创建任务
- `profile.get` - 获取用户画像
- `profile.update` - 更新用户画像
- `auth.me` - 获取当前用户
- `auth.logout` - 退出登录

### 设计风格

#### 赏金猎人主题
- **配色方案**:
  - 背景: `oklch(0.12 0.015 250)` - 深蓝黑
  - 主色: `oklch(0.70 0.15 75)` - 金色
  - 强调: `oklch(0.50 0.12 220)` - 青色
  - 卡片: `oklch(0.16 0.02 250)` - 深灰蓝

- **视觉元素**:
  - 金币/赏金图标
  - 徽章系统
  - 玻璃态卡片
  - 渐变按钮
  - 数据可视化

- **字体**: Inter (Google Fonts)

### 示例数据
已添加6个示例任务:
1. 周末一起去香山爬山 (¥200)
2. 一起学习React Native开发 (¥500)
3. 寻找摄影搭子拍秋景 (¥300)
4. 组队打羽毛球 (¥150)
5. 一起探店品尝网红美食 (¥250)
6. 英语口语练习搭子 (¥400)

### 部署信息
- **开发环境**: https://3000-iyasrztoojmd7m0imhfai-d6807d2b.manusvm.computer
- **版本**: 66b0ff9c
- **状态**: ✅ 运行中

---

## 二、React Native移动端 (已完成)

### 技术栈
- **框架**: React Native + Expo
- **导航**: React Navigation (Stack + Bottom Tabs)
- **状态管理**: Zustand
- **数据请求**: Axios + React Query
- **UI**: 自定义组件

### 核心页面

#### 1. 首页 (HomeScreen)
- Hero区(标题/副标题/徽章)
- 统计卡片(3个关键指标)
- 热门分类(6个分类网格)
- 最新任务(前6个任务)
- 响应式布局

#### 2. 任务广场 (TasksScreen)
- 搜索栏(实时筛选)
- 分类标签(横向滚动)
- 结果计数
- 任务列表(无限滚动)
- 空状态处理

#### 3. 底部导航
- 首页 Tab (🏠)
- 任务 Tab (🎯)
- 我的 Tab (👤 - 占位)

### API集成
- 连接Web应用后端
- 共享数据结构
- 类型安全(TypeScript)

### 主题配色
与Web应用保持一致:
- 背景: `#1E1E2E`
- 主色: `#F5C842`
- 强调: `#4ECDC4`
- 卡片: `#2A2A3E`

### 项目结构
```
bounty-buddy-mobile/
├── App.tsx                 # 主入口
├── src/
│   ├── api/
│   │   └── client.ts       # API客户端
│   ├── screens/
│   │   ├── HomeScreen.tsx
│   │   └── TasksScreen.tsx
│   └── theme/
│       └── colors.ts       # 主题配置
├── package.json
└── README.md
```

### 运行方式
```bash
cd bounty-buddy-mobile
npm install
npm run web    # Web预览
npm run ios    # iOS (需要macOS)
npm run android # Android
```

---

## 三、核心特性对比

| 功能 | Web应用 | React Native |
|------|---------|--------------|
| 首页 | ✅ | ✅ |
| 任务广场 | ✅ | ✅ |
| 发布任务 | ✅ | 🚧 待开发 |
| 任务详情 | 🚧 待开发 | 🚧 待开发 |
| 用户中心 | 🚧 待开发 | 🚧 待开发 |
| 消息系统 | 🚧 待开发 | 🚧 待开发 |
| 地图集成 | 🚧 待开发 | 🚧 待开发 |
| 支付集成 | 🚧 待开发 | 🚧 待开发 |

---

## 四、PRD功能覆盖度

### 已实现 (MVP阶段)
- ✅ 用户注册/登录/基础认证
- ✅ 任务发布/浏览/搜索
- ✅ 分类导航
- ✅ 数据库Schema完整设计
- ✅ 赏金猎人主题UI
- ✅ 响应式设计
- ✅ 跨平台支持(Web + Mobile)

### 待开发 (V1.0阶段)
- ⏳ 任务详情页
- ⏳ 接单流程
- ⏳ 站内IM
- ⏳ 托管支付(Stripe Connect)
- ⏳ 验收结算
- ⏳ 互评系统
- ⏳ 分级实名认证
- ⏳ 信誉分与徽章
- ⏳ 地图热区
- ⏳ 智能匹配算法
- ⏳ 仲裁系统

### 待开发 (V1.5阶段)
- ⏳ 小组任务
- ⏳ 连续任务(周卡/月卡)
- ⏳ GPS到场验证
- ⏳ 保险/保障包
- ⏳ 高级推荐

---

## 五、技术亮点

1. **跨平台架构**: Web和RN共享API和数据结构
2. **类型安全**: 全栈TypeScript,端到端类型推导
3. **现代化UI**: Tailwind 4 + shadcn/ui组件
4. **tRPC集成**: 无需手写API客户端,自动类型同步
5. **赏金猎人主题**: 独特的视觉风格,区别于通用平台
6. **可扩展架构**: 清晰的模块划分,易于功能扩展

---

## 六、部署与使用

### Web应用
1. 访问: https://3000-iyasrztoojmd7m0imhfai-d6807d2b.manusvm.computer
2. 点击"开始使用"登录
3. 浏览任务或发布新任务

### React Native应用
1. 解压 `bounty-buddy-mobile.tar.gz`
2. 运行 `npm install`
3. 运行 `npm run web` 预览
4. 或使用Expo Go扫码在手机上运行

---

## 七、下一步建议

### 短期优化
1. 完善任务详情页(Web + Mobile)
2. 实现接单流程
3. 添加基础的站内消息功能
4. 集成地图组件(Mapbox/Google Maps)

### 中期开发
1. 集成Stripe Connect托管支付
2. 实现验收与互评流程
3. 开发信誉体系
4. 添加推送通知

### 长期规划
1. 智能匹配算法优化
2. 社交图谱分析
3. AI内容审核
4. 数据分析仪表盘

---

## 八、文件清单

### Web应用
- 项目路径: `/home/ubuntu/bounty-buddy-platform`
- 检查点: `manus-webdev://66b0ff9c`
- 核心文件:
  - `drizzle/schema.ts` - 数据库Schema
  - `server/db.ts` - 数据库查询
  - `server/routers.ts` - tRPC路由
  - `client/src/pages/Home.tsx` - 首页
  - `client/src/pages/TaskMarket.tsx` - 任务广场
  - `client/src/pages/CreateTask.tsx` - 发布任务
  - `client/src/index.css` - 主题样式

### React Native应用
- 项目路径: `/home/ubuntu/bounty-buddy-mobile`
- 压缩包: `/home/ubuntu/bounty-buddy-mobile.tar.gz`
- 核心文件:
  - `App.tsx` - 主入口
  - `src/api/client.ts` - API客户端
  - `src/screens/HomeScreen.tsx` - 首页
  - `src/screens/TasksScreen.tsx` - 任务广场
  - `src/theme/colors.ts` - 主题配置
  - `README.md` - 使用文档

---

## 九、总结

本项目成功实现了搭子任务赏金平台的MVP版本,包含:

1. **完整的数据库设计** - 8个表覆盖核心业务流程
2. **Web应用** - 首页/任务广场/发布任务三大核心页面
3. **React Native应用** - 首页/任务广场两大核心页面
4. **赏金猎人主题** - 独特的视觉风格和用户体验
5. **跨平台支持** - Web和移动端共享API和设计语言

项目采用现代化技术栈,代码结构清晰,易于扩展。后续可按照PRD逐步实现完整功能,最终达到V1.5版本的目标。

